<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
</head>
<body>
    <section class="hero-section">
         <nav class="navbar">
            <a href="/homepage/index.html" class="logo">TMPOE</a>
            <div class="navbar-links">
                <a href="/studypage/index.html">Study</a>
                <a href="/goalspage/index.html">Goals</a>
                <a href="/groupspage/forumDiscussion.html">Groups</a>
                <a href="/helppage/ResolveProblemPagee.html">Help</a>
            </div>
        </nav>
    </section>
    <section class="study-section">
        <div class="buttons-container">
            <button class="start" onclick="startStudySession()">Start</button>
            <button class="pause" onclick="pauseTimer()">Pause</button> <!-- <span class="material-symbols-outlined" style="font-size: 30px;">timer_pause</span> -->
            <button class="stop" onclick="stopTimer()">Stop</button> <!-- <span class="material-symbols-outlined" style="font-size: 30px;">timer_off</span> -->
            <button class="setting" onclick="showPopup()">Settings</button> <!-- <span class="material-symbols-outlined" style="font-size: 30px;">psychology</span> -->
        </div>
    

        <div class="container" id="popupOverlay">
            <div class="container">
                <div class="dropdown-container">
                    <label for="study-duration" class="dropdown-label">Duration</label>
                    <div class="custom-select-wrapper">
                        <select id="study-duration" class="dropdown">
                            <option value="3" disabled selected>How long do you want to study?</option>
                            <option value="30">30 mins</option>
                            <option value="60">60 mins</option>
                            <option value="90">90 mins</option>
                            <option value="120">120 mins</option>
                        </select>
                    </div>
                </div>
                
                <div class="dropdown-container">
                    <label for="study-interval" class="dropdown-label">Interval</label>
                    <div class="custom-select-wrapper">
                        <select id="study-interval" class="dropdown">
                            <option value="1" disabled selected>Choose your interval</option>
                            <option value="15">15 mins</option>
                            <option value="30">30 mins</option>
                            <option value="45">45 mins</option>
                            <option value="60">60 mins</option>
                        </select>
                    </div>
                </div>
                
                <div class="dropdown-container">
                    <label for="study-breaks" class="dropdown-label">Breaks</label>
                    <div class="custom-select-wrapper">
                        <select id="study-breaks" class="dropdown">
                            <option value="3" disabled selected>Choose your break duration</option>
                            <option value="3">3 mins</option>
                            <option value="5">5 mins</option>
                            <option value="10">10 mins</option>
                            <option value="15">15 mins</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="footer-tab">
                <button class="circle-button" onclick="hidePopup()">-</button>
                <button class="circle-button save-button" onclick="startStudySession()">âœ“</button>
            </div>
        
            
            
        </div>
        <div class="timer-container">
            <div id="timerDisplay">00:00</div>
            <div id="timerState">Ready</div>
            <div class="interval-container">
                <div id="intervalIndicators"></div>
            </div>
        </div>

        
        <div id="popup" class="popup" >
            <div class="popup-content">
                <span class="close" onclick="hidePopup()">&times;</span>
                <h2>Saved Information</h2>
                <p><strong>Duration:</strong> <span id="saved-duration"></span></p>
                <p><strong>Interval:</strong> <span id="saved-interval"></span></p>
                <p><strong>Breaks:</strong> <span id="saved-breaks"></span></p>
            </div>
        </div>
    </section>
    <footer class="footer">
        <div class="footerLeft">
            <h1>Need Help?</h1>
            <h2>Contact Us</h2>
            <h3>+62 2002 3232 121</h3>
            <h3>customerservice@tmpoe.com</h3>
            <h3>Others</h3>
            <h3>Privacy</h3>
            <h3>User Data & Security</h3>
        </div>
        <div class="footerRight">
            <h2>Follow us on<br>Social Media</h2>
            <h3>Tiktok</h3>
            <ul>
                <li><a href="#">@tmpoe.id</a></li>
                <li><a href="#">@tmpoe</a></li>
            </ul>
            <h3>Instagram</h3>
            <ul>
                <li><a href="#">@tmpoe.id</a></li>
                <li><a href="#">@tmpoe</a></li>
            </ul>
        </div>
    </footer>

    <script>
        let timerInterval;
let breakTimerInterval;
let remainingTime = 0;
let isPaused = false;
let timeBeforeBreak = 0;
let studyDuration = 0;
let intervalDuration = 0;
let breakDuration = 0;
let totalIntervals = 0;
let currentInterval = 0;

function startStudySession() {
    hidePopup();
    // Get selected durations
    studyDuration = parseInt(document.getElementById('study-duration').value);
    intervalDuration = parseInt(document.getElementById('study-interval').value);
    breakDuration = parseInt(document.getElementById('study-breaks').value);
    
    remainingTime = studyDuration * 60;
    timeBeforeBreak = 0;
    totalIntervals = Math.floor(studyDuration / intervalDuration);
    currentInterval = 0;
    updateTimer();
    createIntervalIndicators();
    document.getElementById('timerState').innerText = "Studying...";

    if (timerInterval) {
        clearInterval(timerInterval);
    }
    
    timerInterval = setInterval(updateStudyTimer, 1000); // Update timer every second
}

function updateStudyTimer() {
    remainingTime--;
    timeBeforeBreak++;
    updateTimer();
    if (timeBeforeBreak === intervalDuration * 60) {
        currentInterval++;
        timeBeforeBreak = 0;
        updateIntervalIndicators();
        clearInterval(timerInterval);
        startBreakTimer();
    }
    if (remainingTime <= 0) {
        clearInterval(timerInterval);
        alert("Time's up!");
    }
}

function updateBreakTimer() {
    breakDuration--;
    updateTimer();
    if (breakDuration <= 0) {
        clearInterval(breakTimerInterval);
        timerInterval = setInterval(updateStudyTimer, 1000);
        document.getElementById('timerState').innerText = "Studying...";
    }
}

function updateTimer() {
    let minutes = Math.floor(remainingTime / 60);
    let seconds = remainingTime % 60;

    seconds = seconds < 10 ? '0' + seconds : seconds;
    minutes = minutes < 10 ? '0' + minutes : minutes;

    document.getElementById('timerDisplay').innerHTML = minutes + ":" + seconds;
}

function createIntervalIndicators() {
    const intervalIndicators = document.getElementById('intervalIndicators');
    intervalIndicators.innerHTML = '';

    for (let i = 0; i < totalIntervals; i++) {
        const indicator = document.createElement('div');
        indicator.classList.add('interval-indicator');
        indicator.classList.add('remaining');
        intervalIndicators.appendChild(indicator);
    }
}

function updateIntervalIndicators() {
    const intervalIndicators = document.getElementById('intervalIndicators').children;

    for (let i = 0; i < totalIntervals; i++) {
        intervalIndicators[i].classList.remove('passed', 'remaining');
        if (i < currentInterval) {
            intervalIndicators[i].classList.add('passed');
        } else {
            intervalIndicators[i].classList.add('remaining');
        }
    }
}

function startBreakTimer() {
    document.getElementById('timerState').innerText = "Break";
    breakDuration = parseInt(document.getElementById('study-breaks').value);
    breakTimerInterval = setInterval(updateBreakTimer, 1000);
}

function pauseTimer() {
    if (isPaused) {
        resumeTimer();
    } else {
        clearInterval(timerInterval);
        clearInterval(breakTimerInterval);
        isPaused = true;
        document.getElementById('timerState').innerText = "Paused";
    }
}

function resumeTimer() {
    if (document.getElementById('timerState').innerText === "Break") {
        breakTimerInterval = setInterval(updateBreakTimer, 1000);
    } else {
        timerInterval = setInterval(updateStudyTimer, 1000);
    }
    isPaused = false;
    document.getElementById('timerState').innerText = "Studying...";
}

function stopTimer() {
    clearInterval(timerInterval);
    clearInterval(breakTimerInterval);
    remainingTime = 0;
    currentInterval = 0;
    updateTimer();
    updateIntervalIndicators();
    document.getElementById('timerState').innerText = "Stopped";
}

function showPopup() {
    document.getElementById('popupOverlay').style.display = 'block';
}

function hidePopup() {
    document.getElementById('popupOverlay').style.display = 'none';
    document.getElementById('popup').style.display = 'none';
}

    </script>

</body>

</html>
